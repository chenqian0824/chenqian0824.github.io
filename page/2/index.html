<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="余真帆, fanerge, web, web前端" />





  <link rel="alternate" href="/atom.xml" title="余真帆的博客" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="前端、web">
<meta property="og:type" content="website">
<meta property="og:title" content="余真帆的博客">
<meta property="og:url" content="https://fanerge.github.io/page/2/index.html">
<meta property="og:site_name" content="余真帆的博客">
<meta property="og:description" content="前端、web">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="余真帆的博客">
<meta name="twitter:description" content="前端、web">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://fanerge.github.io/page/2/"/>





  <title>  余真帆的博客 - 前端、web  </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?947609e8bcc46de32a1dca9cc56cd8a1";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>










  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">余真帆的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">一个专注于技术的个人博客</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://fanerge.github.io/2017/09/17/koa学习-静态资源加载/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="余真帆-fanerge">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="余真帆的博客">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/09/17/koa学习-静态资源加载/" itemprop="url">
                  koa学习-静态资源加载
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-17T13:17:50+08:00">
                2017-09-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NodeJS/" itemprop="url" rel="index">
                    <span itemprop="name">NodeJS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/09/17/koa学习-静态资源加载/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/09/17/koa学习-静态资源加载/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="原生koa2实现静态资源服务器"><a href="#原生koa2实现静态资源服务器" class="headerlink" title="原生koa2实现静态资源服务器"></a>原生koa2实现静态资源服务器</h3><pre><code>一个http请求访问web服务静态资源，一般响应结果有三种情况
</code></pre><ol>
<li>访问文本，例如html，js，css，png，jpg，gif</li>
<li>访问静态目录</li>
<li>找不到资源，抛出404错误<br>这里由于代码量过多，请查看源代码<br><a href="">这里由于代码量过多，请查看源代码</a><h3 id="koa-static中间件使用"><a href="#koa-static中间件使用" class="headerlink" title="koa-static中间件使用"></a>koa-static中间件使用</h3>koa-static作为koaweb框架的静态服务器中间件<br>使用关键代码:<pre><code>// 导入koa-static模块
const static = require(&apos;koa-static&apos;);
// 设置静态资源的更目录
const staticPath = &apos;./static&apos;;
// 使用静态资源中间件
app.use(static(path.join(__dirname, staticPath)));
</code></pre><blockquote>
<p>   参考文档：<br><a href="https://chenshenhai.github.io/koa2-note/note/request/post-use-middleware.html" target="_blank" rel="external">koa-note</a><br><a href="https://www.npmjs.com/package/cookies" target="_blank" rel="external">cookies</a></p>
</blockquote>
</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://fanerge.github.io/2017/09/17/koa学习-请求数据获取/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="余真帆-fanerge">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="余真帆的博客">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/09/17/koa学习-请求数据获取/" itemprop="url">
                  koa学习-请求数据获取
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-17T11:13:16+08:00">
                2017-09-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NodeJS/" itemprop="url" rel="index">
                    <span itemprop="name">NodeJS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/09/17/koa学习-请求数据获取/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/09/17/koa学习-请求数据获取/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="GET请求数据获取"><a href="#GET请求数据获取" class="headerlink" title="GET请求数据获取"></a>GET请求数据获取</h3><pre><code>获取GET请求数据源头是koa中request对象中的query方法或querystring方法，
query返回是格式化好的参数对象，querystring返回的是请求字符串。    
由于ctx对request的API有直接引用的方式，所以获取GET请求数据有两个途径。
</code></pre><ol>
<li>是从上下文中直接获取<br>  请求对象ctx.query，返回如 { a:1, b:2 }<br>  请求字符串 ctx.querystring，返回如 a=1&amp;b=2</li>
<li><p>是从上下文的request对象中获取<br>  请求对象ctx.request.query，返回如 { a:1, b:2 }<br>  请求字符串 ctx.request.querystring，返回如 a=1&amp;b=2<br>关键代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">app.use(async (ctx) =&gt; &#123;</div><div class="line">	let url = ctx.url;</div><div class="line">	let request = ctx.request;</div><div class="line">	// 使用ctx.request对象获取</div><div class="line">	let req_query = request.query;</div><div class="line">	let req_querystring = request.querystring;</div><div class="line">	// 使用ctx对其request属性的引用获取</div><div class="line">	let ctx_query = ctx.query;</div><div class="line">	let ctx_querystring = ctx.querystring;</div><div class="line">	ctx.body = &#123;</div><div class="line">		url,</div><div class="line">		req_query,</div><div class="line">		req_querystring,</div><div class="line">		ctx_query,</div><div class="line">		ctx_querystring</div><div class="line">	&#125;;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>输出：<br>测试url：<a href="http://localhost:3000/?name=fanerge&amp;age=323" target="_blank" rel="external">http://localhost:3000/?name=fanerge&amp;age=323</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">	url: &quot;/?name=fanerge&amp;age=323&quot;,</div><div class="line">	req_query: &#123;</div><div class="line">		name: &quot;fanerge&quot;,</div><div class="line">		age: &quot;323&quot;</div><div class="line">	&#125;,</div><div class="line">	req_querystring: &quot;name=fanerge&amp;age=323&quot;,</div><div class="line">	ctx_query: &#123;</div><div class="line">		name: &quot;fanerge&quot;,</div><div class="line">		age: &quot;323&quot;</div><div class="line">	&#125;,</div><div class="line">	ctx_querystring: &quot;name=fanerge&amp;age=323&quot;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="POST请求参数获取"><a href="#POST请求参数获取" class="headerlink" title="POST请求参数获取"></a>POST请求参数获取</h3><pre><code>解析出POST请求上下文中的表单数据
新建一个工具函数库：./util/index.js
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">function parseQueryStr (queryStr) &#123;</div><div class="line">	let queryData = &#123;&#125;;</div><div class="line">	let queryStrList = queryStr.split(&apos;&amp;&apos;);</div><div class="line">	console.log(queryStrList);</div><div class="line">	for (let [index, queryStr] of queryStrList.entries()) &#123;</div><div class="line">		let itemList = queryStr.split(&apos;=&apos;);</div><div class="line">		queryData[itemList[0]] = decodeURIComponent(itemList[1]);</div><div class="line">	&#125;</div><div class="line">	return queryData;</div><div class="line">&#125;</div><div class="line"></div><div class="line">function parsePostData (ctx) &#123;</div><div class="line">	return new Promise((resolve, reject) =&gt; &#123;</div><div class="line">		try &#123;</div><div class="line">			let postData = &quot;&quot;;</div><div class="line">			ctx.req.addListener(&apos;data&apos;, (data) =&gt; &#123;</div><div class="line">				postData += data;</div><div class="line">			&#125;);</div><div class="line">			ctx.req.addListener(&apos;end&apos;, ()=&gt; &#123;</div><div class="line">				let parseData = parseQueryStr(postData);</div><div class="line">				resolve(parseData);</div><div class="line">			&#125;);</div><div class="line">		&#125; catch (e) &#123;</div><div class="line">			conole.error(e);</div><div class="line">			reject(e);</div><div class="line">		&#125;</div><div class="line">	&#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line">module.exports= &#123;</div><div class="line">	parsePostData,</div><div class="line">&#125;;</div></pre></td></tr></table></figure>

post.js关键代码
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">const &#123;parsePostData&#125; = require(&apos;./util/index&apos;);</div><div class="line"></div><div class="line">app.use(async (ctx) =&gt; &#123;</div><div class="line">	if (ctx.url === &apos;/&apos; &amp;&amp; ctx.method === &apos;GET&apos;) &#123;</div><div class="line">		// 当get请求是返回表单页面</div><div class="line">		let html = `</div><div class="line">			&lt;h1&gt;koa2 request post demo&lt;/h1&gt;</div><div class="line">		  &lt;form method=&quot;POST&quot; action=&quot;/&quot;&gt;</div><div class="line">			&lt;p&gt;userName&lt;/p&gt;</div><div class="line">			&lt;input name=&quot;userName&quot; /&gt;&lt;br/&gt;</div><div class="line">			&lt;p&gt;nickName&lt;/p&gt;</div><div class="line">			&lt;input name=&quot;nickName&quot; /&gt;&lt;br/&gt;</div><div class="line">			&lt;p&gt;email&lt;/p&gt;</div><div class="line">			&lt;input name=&quot;email&quot; /&gt;&lt;br/&gt;</div><div class="line">			&lt;button type=&quot;submit&quot;&gt;submit&lt;/button&gt;</div><div class="line">		  &lt;/form&gt;</div><div class="line">		`;</div><div class="line">		ctx.body = html;</div><div class="line">	&#125; else if (ctx.url === &apos;/&apos; &amp;&amp; ctx.method === &apos;POST&apos;) &#123;</div><div class="line">		let postData = await parsePostData(ctx);</div><div class="line">		ctx.body = postData;</div><div class="line">	&#125; else &#123;</div><div class="line">		ctx.body = &apos;没找到&apos;</div><div class="line">	&#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>

提交表单的数据
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">	userName: &quot;67&quot;,</div><div class="line">	nickName: &quot;89&quot;,</div><div class="line">	email: &quot;0&quot;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</code></pre><h3 id="koa-bodyparser中间件"><a href="#koa-bodyparser中间件" class="headerlink" title="koa-bodyparser中间件"></a>koa-bodyparser中间件</h3><pre><code>对于POST请求的处理，koa-bodyparser中间件可以把koa2上下文的formData数据解析到ctx.request.body中
关键代码：
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">const bodyParser = require(&apos;koa-bodyparser&apos;); // 引入该模块</div><div class="line">app.use(bodyParser()); // 使用ctx.body解析中间件</div><div class="line">app.use(async (ctx) =&gt; &#123;</div><div class="line">	if (ctx.url === &apos;/&apos; &amp;&amp; ctx.method === &apos;GET&apos;) &#123;</div><div class="line">		// 当GET请求时候返回表单页面</div><div class="line">		let html = `</div><div class="line">		  &lt;h1&gt;koa2 request post demo&lt;/h1&gt;</div><div class="line">		  &lt;form method=&quot;POST&quot; action=&quot;/&quot;&gt;</div><div class="line">			&lt;p&gt;userName&lt;/p&gt;</div><div class="line">			&lt;input name=&quot;userName&quot; /&gt;&lt;br/&gt;</div><div class="line">			&lt;p&gt;nickName&lt;/p&gt;</div><div class="line">			&lt;input name=&quot;nickName&quot; /&gt;&lt;br/&gt;</div><div class="line">			&lt;p&gt;email&lt;/p&gt;</div><div class="line">			&lt;input name=&quot;email&quot; /&gt;&lt;br/&gt;</div><div class="line">			&lt;button type=&quot;submit&quot;&gt;submit&lt;/button&gt;</div><div class="line">		  &lt;/form&gt;</div><div class="line">		`</div><div class="line">		ctx.body = html</div><div class="line">	&#125; else if (ctx.url === &apos;/&apos; &amp;&amp; ctx.method === &apos;POST&apos;) &#123;</div><div class="line">		// 当POST请求的时候，中间件koa-bodyparser解析POST表单里的数据，并显示出来</div><div class="line">		let postData = ctx.request.body;</div><div class="line">		ctx.body = postData;</div><div class="line">	&#125; else &#123;</div><div class="line">		ctx.body = &apos;没找到404&apos;;</div><div class="line">	&#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</code></pre><blockquote>
<p>   参考文档：<br>    <a href="https://chenshenhai.github.io/koa2-note/note/request/post-use-middleware.html" target="_blank" rel="external">koa-note</a><br>    <a href="https://www.npmjs.com/package/koa-bodyparser" target="_blank" rel="external">koa-bodyparser</a></p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://fanerge.github.io/2017/09/16/koa学习-中间件和路由/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="余真帆-fanerge">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="余真帆的博客">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/09/16/koa学习-中间件和路由/" itemprop="url">
                  koa学习-中间件和路由
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-16T21:24:00+08:00">
                2017-09-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NodeJS/" itemprop="url" rel="index">
                    <span itemprop="name">NodeJS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/09/16/koa学习-中间件和路由/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/09/16/koa学习-中间件和路由/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="koa中间件的制作和使用"><a href="#koa中间件的制作和使用" class="headerlink" title="koa中间件的制作和使用"></a>koa中间件的制作和使用</h2><h3 id="koa模版"><a href="#koa模版" class="headerlink" title="koa模版"></a>koa模版</h3><pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">var koa = require(&apos;koa&apos;);</div><div class="line">const app = new koa();</div><div class="line">// 中间件</div><div class="line">app.use(async (ctx) =&gt; &#123;</div><div class="line">	ctx.body = &apos;hello koa2&apos;;</div><div class="line">&#125;);</div><div class="line">app.listen(3000);</div></pre></td></tr></table></figure>
</code></pre><h3 id="async-await"><a href="#async-await" class="headerlink" title="async/await"></a>async/await</h3><pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">function getSyncTime () &#123;</div><div class="line">	return new Promise((resolve, reject) =&gt; &#123;</div><div class="line">		try &#123;</div><div class="line">			let startTime = new Date().getTime();</div><div class="line">			setTimeout(() =&gt; &#123;</div><div class="line">				let endTime = new Date().getTime();</div><div class="line">				let data = endTime - startTime;</div><div class="line">				resolve(data);</div><div class="line">			&#125;, 500);</div><div class="line">		&#125; catch (e) &#123;</div><div class="line">			reject(e);</div><div class="line">		&#125;</div><div class="line">	&#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line">async function getSyncData () &#123;</div><div class="line">	let time = await getSyncTime();</div><div class="line">	let data = `endTime - startTime = $&#123;time&#125;`;</div><div class="line">	console.log(data);</div><div class="line">&#125;</div><div class="line">getSyncData();</div></pre></td></tr></table></figure>
</code></pre><h3 id="koa2简析结构"><a href="#koa2简析结构" class="headerlink" title="koa2简析结构"></a>koa2简析结构</h3><pre><code>源码文件：
├── lib
│   ├── application.js
│   ├── context.js
│   ├── request.js
│   └── response.js
└── package.json
文件说明：
application.js 是整个koa2 的入口文件，封装了context，request，response，以及最核心的中间件处理流程。
context.js 处理应用上下文，里面直接封装部分request.js和response.js的方法
request.js 处理http请求
response.js 处理http响应
</code></pre><h3 id="koa中间件开发和使用"><a href="#koa中间件开发和使用" class="headerlink" title="koa中间件开发和使用"></a>koa中间件开发和使用</h3><pre><code>以日志中间件为例
middleware/logger-async.js
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">function log (ctx) &#123;</div><div class="line">	console.log(`请求方法：$&#123;ctx.method&#125;, host：$&#123;ctx.header.host&#125;, url：$&#123;ctx.url&#125;`);</div><div class="line">&#125;</div><div class="line"></div><div class="line">module.exports = function () &#123;</div><div class="line">	return async function (ctx, next)&#123;</div><div class="line">		log(ctx);</div><div class="line">		await next();</div><div class="line">	&#125;;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>

使用该中间件logger
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">const loggerAsync  = require(&apos;./middleware/logger-async&apos;);</div><div class="line">// 使用日志中间件</div><div class="line">app.use(loggerAsync());</div></pre></td></tr></table></figure>
</code></pre><h2 id="koa路由中间件"><a href="#koa路由中间件" class="headerlink" title="koa路由中间件"></a>koa路由中间件</h2><h3 id="koa2原生路由实现"><a href="#koa2原生路由实现" class="headerlink" title="koa2原生路由实现"></a>koa2原生路由实现</h3><pre><code>获取url：ctx.request.url
后端路由：根据前端get请求的url地址，后端返回对应的view页面达到。
</code></pre><h3 id="koa-router中间件"><a href="#koa-router中间件" class="headerlink" title="koa-router中间件"></a>koa-router中间件</h3><pre><code>安装koa-router中间件
    npm install --save koa-router
使用koa-router
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">// 子路由1</div><div class="line">let home = new Router();</div><div class="line">home.get(&apos;/&apos;, async (ctx) =&gt; &#123;</div><div class="line">	let html = `</div><div class="line">		&lt;ul&gt;</div><div class="line">			&lt;li&gt;&lt;a href=&quot;/&quot;&gt;/&lt;/a&gt;&lt;/li&gt;</div><div class="line">			&lt;li&gt;&lt;a href=&quot;/page&quot;&gt;/page&lt;/a&gt;&lt;/li&gt;</div><div class="line">			&lt;li&gt;&lt;a href=&quot;/page/helloword&quot;&gt;/page/helloword&lt;/a&gt;&lt;/li&gt;</div><div class="line">			&lt;li&gt;&lt;a href=&quot;/page/chengdu&quot;&gt;/page/chengdu&lt;/a&gt;&lt;/li&gt;</div><div class="line">			&lt;li&gt;&lt;a href=&quot;/page/ss&quot;&gt;not found&lt;/a&gt;&lt;/li&gt;</div><div class="line">		&lt;/ul&gt;</div><div class="line">	`;</div><div class="line">	ctx.body = html;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">// 子路由2</div><div class="line">let page = new Router();</div><div class="line">page.get(&apos;/&apos;, async (ctx) =&gt; &#123;</div><div class="line">	ctx.body = &apos;page主页&apos;;</div><div class="line">&#125;)</div><div class="line">.get(&apos;/chengdu&apos;, async (ctx) =&gt; &#123;</div><div class="line">	ctx.body = &apos;欢迎来到成都&apos;;</div><div class="line">&#125;)</div><div class="line">.get(&apos;/helloword&apos;, (ctx) =&gt; &#123;</div><div class="line">	ctx.body = &apos;helloword page&apos;;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">// 子路由3-Not found</div><div class="line">let notFound = new Router();</div><div class="line">notFound.get(&apos;*&apos;, async (ctx) =&gt; &#123;</div><div class="line">	ctx.body = &apos;没有找到！&apos;;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">// 装载所有的子路由</div><div class="line">let router = new Router();</div><div class="line">router.use(&apos;/&apos;, home.routes(), home.allowedMethods());</div><div class="line">router.use(&apos;/page&apos;, page.routes(), page.allowedMethods());</div><div class="line">router.use(&apos;*&apos;, notFound.routes(), notFound.allowedMethods());</div><div class="line"></div><div class="line">// 加载路由中间件</div><div class="line">app.use(router.routes())</div><div class="line">.use(router.allowedMethods());</div></pre></td></tr></table></figure>
</code></pre><blockquote>
<p>   参考文档：<br>    <a href="https://chenshenhai.github.io/koa2-note/note/request/get.html" target="_blank" rel="external">koa2-note</a><br>    <a href="https://www.npmjs.com/package/koa-router" target="_blank" rel="external">koa-router官方文档</a></p>
<p>   参考文档：<br>    <a href="https://chenshenhai.github.io/koa2-note" target="_blank" rel="external">koa2</a></p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://fanerge.github.io/2017/09/16/nodejs自带模块-HTTP/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="余真帆-fanerge">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="余真帆的博客">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/09/16/nodejs自带模块-HTTP/" itemprop="url">
                  HTTP模块
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-16T17:06:40+08:00">
                2017-09-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NodeJS/" itemprop="url" rel="index">
                    <span itemprop="name">NodeJS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/09/16/nodejs自带模块-HTTP/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/09/16/nodejs自带模块-HTTP/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="要使用-HTTP-服务器与客户端，需要-require-‘http’-。"><a href="#要使用-HTTP-服务器与客户端，需要-require-‘http’-。" class="headerlink" title="要使用 HTTP 服务器与客户端，需要 require(‘http’)。"></a>要使用 HTTP 服务器与客户端，需要 require(‘http’)。</h3><pre><code>Node.js 中的 HTTP 接口被设计成支持协议的许多特性。 比如，大块编码的消息。 这些接口不缓冲完整的请求或响应，用户能够以流的形式处理数据。
</code></pre><h3 id="http-Agent-类"><a href="#http-Agent-类" class="headerlink" title="http.Agent 类"></a>http.Agent 类</h3><pre><code>Agent 负责为 HTTP 客户端管理连接的持续与复用。 它为一个给定的主机与端口维护着一个等待请求的队列，且为每个请求重复使用一个单一的 socket 连接直到队列为空，此时 socket 会被销毁或被放入一个连接池中，在连接池中等待被有着相同主机与端口的请求再次使用。 是否被销毁或被放入连接池取决于 keepAlive 选项。
</code></pre><ol>
<li>new Agent([options])<br>  作用：实例化一个代理 代理的配置选项。<br>  var agent = new Agent([options]);</li>
<li>agent.createConnection(options[, callback])<br>  作用：创建一个用于 HTTP 请求的 socket 或流。</li>
<li>agent.keepSocketAlive(socket)<br>  作用：在 socket 被请求分离的时候调用, 可能被代理持续使用。</li>
<li>agent.reuseSocket(socket, request)<br>  作用：由于 keep-alive 选项被保持持久化, 在 socket 附加到 request 时调用。</li>
<li>agent.destroy()<br>  作用：销毁当前正被代理使用的任何 socket。</li>
<li>agent.freeSockets<br>  作用：返回一个对象，包含当前正在等待被启用了 keepAlive 的代理使用的 socket 数组。 不要修改该属性。</li>
<li>agent.getName(options)<br>  作用：为请求选项的集合获取一个唯一的名称，用来判断一个连接是否可以被复用。</li>
<li>agent.maxFreeSockets<br>  作用：默认为 256。 对于已启用 keepAlive 的代理，该属性可设置要保留的空闲 socket 的最大数量。</li>
<li>agent.maxSockets<br>  作用：默认为不限制。 该属性可设置代理为每个来源打开的并发 socket 的最大数量。</li>
<li>agent.requests<br> 作用：返回一个对象，包含还未被分配到 socket 的请求队列。 不要修改。</li>
<li>agent.sockets<br> 作用：返回一个对象，包含当前正被代理使用的 socket 数组。 不要修改。<h3 id="http-ClientRequest-类"><a href="#http-ClientRequest-类" class="headerlink" title="http.ClientRequest 类"></a>http.ClientRequest 类</h3>该对象在 http.request() 内部被创建并返回。 它表示着一个正在处理的请求，其请求头已进入队列。 请求头仍可使用 setHeader(name, value)、getHeader(name) 和 removeHeader(name) API 进行修改。</li>
<li>abort事件<br>当请求已被客户端终止时触发。 该事件仅在首次调用 abort() 时触发。</li>
<li>aborted事件<br>当请求已被服务器终止且网络 socket 已关闭时触发。</li>
<li>connect事件<br>每当服务器响应 CONNECT 请求时触发。</li>
<li>continue事件<br>当服务器发送了一个 100 Continue 的 HTTP 响应时触发，通常是因为请求包含 Expect: 100-continue。 这是客户端将要发送请求主体的指令。</li>
<li>response事件<br>当请求的响应被接收到时触发。 该事件只触发一次。</li>
<li>socket事件<br>当 socket 被分配到请求后触发。</li>
<li>upgrade事件<br>每当服务器响应 upgrade 请求时触发。 </li>
<li>request.abort()<br>标记请求为终止。 调用该方法将使响应中剩余的数据被丢弃且 socket 被销毁。</li>
<li>request.aborted<br>如果请求已被终止，则该属性的值为请求被终止的时间，从 1 January 1970 00:00:00 UTC 到现在的毫秒数。</li>
<li>request.connection</li>
<li>request.end([data[, encoding]][, callback])<br>结束发送请求。</li>
<li>request.flushHeaders()<br>刷新请求头。</li>
<li>request.setNoDelay([noDelay])<br>一旦 socket 被分配给请求且已连接，socket.setNoDelay() 会被调用。</li>
<li>request.setSocketKeepAlive([enable][, initialDelay])<br>一旦 socket 被分配给请求且已连接，socket.setKeepAlive() 会被调用。</li>
<li>request.setTimeout(timeout[, callback])<br>一旦 socket 被分配给请求且已连接，socket.setTimeout() 会被调用。</li>
<li>request.socket<br>引用底层socket。</li>
<li>request.write(chunk[, encoding][, callback])<br>发送请求主体的一个数据块。<h3 id="http-Server-类"><a href="#http-Server-类" class="headerlink" title="http.Server 类"></a>http.Server 类</h3>该类继承自 net.Server，且具有以下额外的事件</li>
<li>checkContinue 事件<br>每当接收到一个带有 HTTP Expect: 100-continue 请求头的请求时触发。</li>
<li>checkExpectation 事件<br>每当接收到一个带有 HTTP Expect 请求头（值不为 100-continue）的请求时触发。 </li>
<li>clientError 事件<br>如果客户端触发了一个 ‘error’ 事件，则它会被传递到这里。</li>
<li>close事件<br>当服务器关闭时触发。</li>
<li>connect事件<br>每当客户端发送 HTTP CONNECT 请求时触发。</li>
<li>connection事件<br>当一个新的 TCP 流被建立时触发。 </li>
<li>request事件<br>每次接收到一个请求时触发。 </li>
<li>upgrade事件<br>每当客户端发送 HTTP upgrade 请求时触发。</li>
<li>server.close([callback])<br>停止服务端接收新的连接。</li>
<li>server.listen(handle[, callback])<br>handle 对象可以被设为一个服务器或 socket（任何带有一个 _handle 成员的对象）、或一个 {fd: <n>} 对象。</n></li>
<li>server.listen(path[, callback])<br>启动一个 UNIX socket 服务器，并在给定的 path 上监听连接。</li>
<li>server.listen([port][, hostname][, backlog][, callback])<br>开始在指定的 port 和 hostname 上接受连接。</li>
<li>server.listening<br>返回一个布尔值，表示服务器是否正在监听连接。</li>
<li>server.maxHeadersCount<br>限制请求头的最大数量，默认为 2000。 如果设为 0，则没有限制。</li>
<li>server.setTimeout([msecs][, callback])<br>设置 socket 的超时时间。</li>
<li>server.timeout<br>socket 被认定为超时的空闲毫秒数。</li>
<li>server.keepAliveTimeout<br>服务器完成最后的响应之后需要等待的额外的传入数据的活跃毫秒数, socket 才能被销毁。<h3 id="http-ServerResponse-类"><a href="#http-ServerResponse-类" class="headerlink" title="http.ServerResponse 类"></a>http.ServerResponse 类</h3>该对象在 HTTP 服务器内部被创建。 它作为第二个参数被传入 ‘request’ 事件。</li>
<li>close事件<br>当底层连接在 response.end() 被调用或能够刷新之前被终止时触发。</li>
<li>finish事件<br>当响应已被发送时触发。 </li>
<li>response.addTrailers(headers)<br>该方法会添加 HTTP 尾部响应头（一种在消息尾部的响应头）到响应。</li>
<li>response.connection</li>
<li>response.end([data][, encoding][, callback])<br>该方法会通知服务器，所有响应头和响应主体都已被发送，即服务器将其视为已完成。 </li>
<li>response.finished<br>返回一个布尔值，表示响应是否已完成。</li>
<li>response.getHeader(name)<br>读取一个已入队列但尚未发送到客户端的响应头。</li>
<li>response.getHeaderNames()<br>返回一个包含当前响应唯一名称的 http 头信息名称数组. 名称均为小写。</li>
<li>response.getHeaders()<br>返回当前响应头文件的浅拷贝。</li>
<li>response.hasHeader(name)<br>如果响应头当前有设置 name 头部，返回 true。</li>
<li>response.headersSent<br>返回一个布尔值（只读）。 </li>
<li>response.removeHeader(name)<br>从隐式发送的队列中移除一个响应头。</li>
<li>response.sendDate<br>当为 true 时，如果响应头里没有日期响应头，则日期响应头会被自动生成并发送。</li>
<li>response.setHeader(name, value)<br>为一个隐式的响应头设置值。</li>
<li>response.setTimeout(msecs[, callback])<br>设置 socket 的超时时间为 msecs。</li>
<li>response.socket<br>引用底层socket。 </li>
<li>response.statusCode<br>当使用隐式的响应头时（没有显式地调用 response.writeHead()），该属性控制响应头刷新时将被发送到客户端的状态码。</li>
<li>response.statusMessage<br>使用隐式的响应头时（没有显式地调用 response.writeHead()），该属性控制响应头刷新时将被发送到客户端的状态信息。</li>
<li>response.write(chunk[, encoding][, callback])<br>如果该方法被调用且 response.writeHead() 没有被调用，则它会切换到隐式响应头模式并刷新隐式响应头。</li>
<li>response.writeContinue()<br>发送一个 HTTP/1.1 100 Continue 消息到客户端，表示请求主体可以开始发送。 参阅 Server 的 ‘checkContinue’ 事件。</li>
<li>response.writeHead(statusCode[, statusMessage][, headers])<br>发送一个响应头给请求。 <h3 id="http-IncomingMessage-类"><a href="#http-IncomingMessage-类" class="headerlink" title="http.IncomingMessage 类"></a>http.IncomingMessage 类</h3>IncomingMessage 对象由 http.Server 或 http.ClientRequest 创建，并作为第一个参数分别递给 ‘request’ 和 ‘response’ 事件。 它可以用来访问响应状态、消息头、以及数据。<blockquote>
<p>   参考文档：<br><a href="http://nodejs.cn/api/http.html" target="_blank" rel="external">HTTP参考-api</a></p>
</blockquote>
</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://fanerge.github.io/2017/09/16/nodejs自带模块-url/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="余真帆-fanerge">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="余真帆的博客">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/09/16/nodejs自带模块-url/" itemprop="url">
                  url模块-网址
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-16T15:04:28+08:00">
                2017-09-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NodeJS/" itemprop="url" rel="index">
                    <span itemprop="name">NodeJS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/09/16/nodejs自带模块-url/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/09/16/nodejs自带模块-url/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="url-模块提供了一些实用函数，用于-URL-处理与解析。"><a href="#url-模块提供了一些实用函数，用于-URL-处理与解析。" class="headerlink" title="url 模块提供了一些实用函数，用于 URL 处理与解析。"></a>url 模块提供了一些实用函数，用于 URL 处理与解析。</h3><h3 id="URL-字符串与-URL-对象"><a href="#URL-字符串与-URL-对象" class="headerlink" title="URL 字符串与 URL 对象"></a>URL 字符串与 URL 对象</h3><pre><code>一个 URL 字符串是一个结构化的字符串，它包含多个有意义的组成部分。 当被解析时，会返回一个 URL 对象，它包含每个组成部分作为属性。
┌─────────────────────────────────────────────────────────────────────────────────────────────┐
&quot;  https:   //    user   :   pass   @ sub.host.com : 8080   /p/a/t/h  ?  query=string   #hash &quot;
│          │  │          │          │   hostname   │ port │          │                │       │
│          │  │          │          ├──────── ──────┴──────┤          │                │       │
│ protocol │  │ username │ password │        host         │          │                │       │
├──────────┴──┼──────────┴──────────┼─────────────────────┤          │                │       │
│   origin    │                     │       origin        │ pathname │     search     │ hash  │
├─────────────┴─────────────────────┴─────────────────────┴──────────┴────────────────┴───────┤
│                                            href                                             │
└─────────────────────────────────────────────────────────────────────────────────────────────┘
</code></pre><h3 id="Constructor-new-URL-input-base"><a href="#Constructor-new-URL-input-base" class="headerlink" title="Constructor: new URL(input[, base])"></a>Constructor: new URL(input[, base])</h3><pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">const &#123; URL &#125; = require(&apos;url&apos;);</div><div class="line">const myURL = new URL(&apos;/foo&apos;, &apos;https://example.org/&apos;);</div><div class="line">// https://example.org/foo</div></pre></td></tr></table></figure>
</code></pre><p>一下实例均以：var myURL = new URL(‘<a href="https://user:pass@sub.host.com:8080/p/a/t/h?query=string#hash" target="_blank" rel="external">https://user:pass@sub.host.com:8080/p/a/t/h?query=string#hash</a>‘);</p>
<h3 id="url-hash"><a href="#url-hash" class="headerlink" title="url.hash"></a>url.hash</h3><pre><code>作用：获取及设置URL的分段(hash)部分。
    myURL.hash; // #hash
</code></pre><h3 id="url-host"><a href="#url-host" class="headerlink" title="url.host"></a>url.host</h3><pre><code>作用：获取及设置URL的主机(host)部分。
    myURL.host; // user:pass@sub.host.com:8080
</code></pre><h3 id="url-hostname"><a href="#url-hostname" class="headerlink" title="url.hostname"></a>url.hostname</h3><pre><code>作用：获取及设置URL的主机名(hostname)部分。 url.host和url.hostname之间的区别是url.hostname不 包含端口。
    myURL.hostname; // user:pass@sub.host.com
</code></pre><h3 id="url-href"><a href="#url-href" class="headerlink" title="url.href"></a>url.href</h3><pre><code>作用：获取及设置序列化的URL。
    myURL.href; // https://user:pass@sub.host.com:8080/p/a/t/h?query=string#hash
</code></pre><h3 id="url-origin"><a href="#url-origin" class="headerlink" title="url.origin"></a>url.origin</h3><pre><code>作用：获取只读序列化的URL orgin部分。
    myURL.origin; // https://user:pass@sub.host.com:8080
</code></pre><h3 id="url-password"><a href="#url-password" class="headerlink" title="url.password"></a>url.password</h3><pre><code>作用：获取及设置URL的密码(password)部分。
    myURL.password; // pass
</code></pre><h3 id="url-pathname"><a href="#url-pathname" class="headerlink" title="url.pathname"></a>url.pathname</h3><pre><code>作用：获取及设置URL的路径(path)部分。
    myURL.pathname; // /p/a/t/h
</code></pre><h3 id="url-port"><a href="#url-port" class="headerlink" title="url.port"></a>url.port</h3><pre><code>作用：获取及设置URL的端口(port)部分。
    myURL.port; 8080
</code></pre><h3 id="url-protocol"><a href="#url-protocol" class="headerlink" title="url.protocol"></a>url.protocol</h3><pre><code>作用：获取及设置URL的协议(protocol)部分。
    myURL.protocol; // https
</code></pre><h3 id="url-search"><a href="#url-search" class="headerlink" title="url.search"></a>url.search</h3><pre><code>作用：获取及设置URL的序列化查询(query)部分部分。
    myURL.search; // ?query=string
</code></pre><h3 id="url-searchParams"><a href="#url-searchParams" class="headerlink" title="url.searchParams"></a>url.searchParams</h3><pre><code>作用：获取表示URL查询参数的URLSearchParams对象。该属性是只读的；
    myURL.searchParams; // 
</code></pre><h3 id="url-username"><a href="#url-username" class="headerlink" title="url.username"></a>url.username</h3><pre><code>作用：获取及设置URL的用户名(username)部分。
    myURL.username; // user
</code></pre><h3 id="url-toString"><a href="#url-toString" class="headerlink" title="url.toString()"></a>url.toString()</h3><pre><code>作用：在URL对象上调用toString()方法将返回序列化的URL。返回值与url.href和url.toJSON()的相同。
    如果需要更大灵活性，require(&apos;url&apos;).format()可能更合适。
</code></pre><h3 id="url-toJSON"><a href="#url-toJSON" class="headerlink" title="url.toJSON()"></a>url.toJSON()</h3><pre><code>在URL对象上调用toJSON()方法将返回序列化的URL。
</code></pre><h3 id="Constructor-new-URLSearchParams-obj"><a href="#Constructor-new-URLSearchParams-obj" class="headerlink" title="Constructor: new URLSearchParams(obj)"></a>Constructor: new URLSearchParams(obj)</h3><pre><code>通过使用查询哈希映射实例化一个新的URLSearchParams对象，obj的每一个属性的键和值将被强制转换为字符串。
urlSearchParams.append(name, value)
    在查询字符串中附加一个新的键值对。
urlSearchParams.entries()
    返回: &lt;Iterator&gt; 在查询中的每个键值对上返回一个ES6迭代器。
urlSearchParams.forEach(fn[, thisArg])
    在查询字符串中迭代每个键值对，并调用给定的函数。
urlSearchParams.get(name)
    返回键是name的第一个键值对的值。如果没有对应的键值对，则返回null。
urlSearchParams.getAll(name)
    返回键是name的所有键值对的值，如果没有满足条件的键值对，则返回一个空的数组。
urlSearchParams.has(name)
    如果存在至少一对键是name的键值对则返回 true。
urlSearchParams.keys()
    在每一个键值对上返回一个键的ES6迭代器。
urlSearchParams.set(name, value)
    将URLSearchParams对象中与name相对应的值设置为value。
urlSearchParams.sort()    
    按现有名称就地排列所有的名称-值对。    
urlSearchParams.toString()    
    返回查询参数序列化后的字符串，必要时存在百分号编码字符。
urlSearchParams.values()
    在每一个键值对上返回一个值的ES6迭代器。
urlSearchParams[@@iterator]()    
    返回在查询字符串中每一个键值对的ES6迭代器。
url.domainToASCII(domain)    
    返回Punycode ASCII序列化的domain. 如果domain是无效域名，将返回空字符串。
url.domainToUnicode(domain)    
    返回Unicode序列化的domain. 如果domain是无效域名，将返回空字符串。
url.format(URL[, options])    
    返回一个WHATWG URL对象的可自定义序列化的URL字符串表达。
</code></pre><blockquote>
<p>   参考文档：<br>    <a href="http://nodejs.cn/api/url.html" target="_blank" rel="external">url参考-api</a></p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://fanerge.github.io/2017/09/16/nodejs自带模块-全局变量/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="余真帆-fanerge">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="余真帆的博客">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/09/16/nodejs自带模块-全局变量/" itemprop="url">
                  全局变量-global
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-16T11:49:36+08:00">
                2017-09-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NodeJS/" itemprop="url" rel="index">
                    <span itemprop="name">NodeJS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/09/16/nodejs自带模块-全局变量/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/09/16/nodejs自带模块-全局变量/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="global-全局变量"><a href="#global-全局变量" class="headerlink" title="global - 全局变量"></a>global - 全局变量</h3><pre><code>global - 全局变量，相当于浏览器环境下的window对象。
</code></pre><h3 id="Buffer"><a href="#Buffer" class="headerlink" title="Buffer"></a>Buffer</h3><pre><code>作用：处理二进制数据。
</code></pre><h3 id="dirname"><a href="#dirname" class="headerlink" title="__dirname"></a>__dirname</h3><pre><code>作用：当前模块的文件夹名称。等同于 __filename 的 path.dirname() 的值。
</code></pre><h3 id="filename"><a href="#filename" class="headerlink" title="__filename"></a>__filename</h3><pre><code>作用：当前模块的文件名称---解析后的绝对路径。
</code></pre><h3 id="console"><a href="#console" class="headerlink" title="console"></a>console</h3><pre><code>作用：用于打印 stdout 和 stderr。
</code></pre><h4 id="关于module-exports-与-exports的区别"><a href="#关于module-exports-与-exports的区别" class="headerlink" title="关于module.exports 与 exports的区别"></a>关于module.exports 与 exports的区别</h4><ol>
<li>module.exports<br>导出：<br>  module.exports= {<pre><code>methodName,
</code></pre>  };<br>引用：<br>  const {methodName} = require(‘path’);    </li>
<li>exports<br>导出：<br>  exports.methodName = function () {…};<br>引用：<br>  const {methodName} = require(‘path’);<h3 id="module"><a href="#module" class="headerlink" title="module"></a>module</h3>作用：导出一个对象。<br>module.exports 用于指定一个模块所导出的内容，即可以通过 require() 访问的内容。<h3 id="exports"><a href="#exports" class="headerlink" title="exports"></a>exports</h3>作用：导出一个方法，为module.exports的简写形式。<br>每一个node.js执行文件，都自动创建一个module对象，同时，module对象会创建一个叫exports的属性，初始化的值是 {}<br>Module.exports本身不具备任何属性和方法。如果，Module.exports已经具备一些属性和方法，那么exports收集来的信息将被忽略。<h3 id="require-path"><a href="#require-path" class="headerlink" title="require(path)"></a>require(path)</h3>作用：引入模块。<h3 id="global"><a href="#global" class="headerlink" title="global"></a>global</h3>作用：全局的命名空间对象。<h3 id="process"><a href="#process" class="headerlink" title="process"></a>process</h3>作用：进程对象。<h3 id="setImmediate-callback-…args"><a href="#setImmediate-callback-…args" class="headerlink" title="setImmediate(callback[, …args])"></a>setImmediate(callback[, …args])</h3>作用：创建 Immediate 对象。<h3 id="clearImmediate-immediateObject"><a href="#clearImmediate-immediateObject" class="headerlink" title="clearImmediate(immediateObject)"></a>clearImmediate(immediateObject)</h3>作用：取消一个由 setImmediate() 创建的 Immediate 对象。<h3 id="setInterval-callback-delay-…args"><a href="#setInterval-callback-delay-…args" class="headerlink" title="setInterval(callback, delay[, …args])"></a>setInterval(callback, delay[, …args])</h3>作用：创建 Timeout 对象。<h3 id="clearInterval-timeoutObject"><a href="#clearInterval-timeoutObject" class="headerlink" title="clearInterval(timeoutObject)"></a>clearInterval(timeoutObject)</h3>作用：取消一个由 setInterval() 创建的 Timeout 对象。<h3 id="setTimeout-callback-delay-…args"><a href="#setTimeout-callback-delay-…args" class="headerlink" title="setTimeout(callback, delay[, …args])"></a>setTimeout(callback, delay[, …args])</h3>作用：创建 Timeout 对象。<h3 id="clearTimeout-timeoutObject"><a href="#clearTimeout-timeoutObject" class="headerlink" title="clearTimeout(timeoutObject)"></a>clearTimeout(timeoutObject)</h3>作用：取消一个由 setTimeout() 创建的 Timeout 对象。<blockquote>
<p>   参考文档：<br><a href="http://nodejs.cn/api/fs.html" target="_blank" rel="external">global参考-api</a></p>
</blockquote>
</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://fanerge.github.io/2017/09/16/nodejs自带模块学习-fs/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="余真帆-fanerge">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="余真帆的博客">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/09/16/nodejs自带模块学习-fs/" itemprop="url">
                  fs模块-文件
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-16T10:18:38+08:00">
                2017-09-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NodeJS/" itemprop="url" rel="index">
                    <span itemprop="name">NodeJS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/09/16/nodejs自带模块学习-fs/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/09/16/nodejs自带模块学习-fs/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="fs模块-文件系统"><a href="#fs模块-文件系统" class="headerlink" title="fs模块-文件系统"></a>fs模块-文件系统</h3><pre><code>以下方法均有同步和异步版本
说明：文件 I/O 是对标准 POSIX 函数的简单封装。 通过 require(&apos;fs&apos;) 使用该模块。 所有的方法都有异步和同步的形式。
异步方法的最后一个参数都是一个回调函数。 传给回调函数的参数取决于具体方法，但回调函数的第一个参数都会保留给异常。 如果操作成功完成，则第一个参数会是 null 或 undefined。
步方法时，任何异常都会被立即抛出。 可以使用 try/catch 来处理异常，或让异常向上冒泡。
</code></pre><h3 id="异步的删除文件"><a href="#异步的删除文件" class="headerlink" title="异步的删除文件"></a>异步的删除文件</h3><pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">fs.unlink(&apos;tmp/hello&apos;, function (err) &#123;</div><div class="line">	if (err) throw err;</div><div class="line">	console.log(&apos;删除成功&apos;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</code></pre><h3 id="同步的删除文件"><a href="#同步的删除文件" class="headerlink" title="同步的删除文件"></a>同步的删除文件</h3><pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">try &#123;</div><div class="line">	fs.unlinkSync(&apos;tmp/hello&apos;);</div><div class="line">&#125;catch (e) &#123;</div><div class="line">	console.error(e);</div><div class="line">&#125;</div><div class="line">console.log(&apos;删除成功&apos;);</div></pre></td></tr></table></figure>
</code></pre><h3 id="fs-contants"><a href="#fs-contants" class="headerlink" title="fs.contants"></a>fs.contants</h3><pre><code>作用：返回一个包含常用文件系统操作的常量的对象。FRWX（可见、读、写、执行）
</code></pre><h3 id="fs-FSWatcher-类"><a href="#fs-FSWatcher-类" class="headerlink" title="fs.FSWatcher 类"></a>fs.FSWatcher 类</h3><pre><code>作用：从 fs.watch() 返回的对象是该类型。
方法：change、error、close分别代表监视目录或文件的改变和出错和关闭监视。
    fs.watch(&apos;./tmp&apos;, (eventType, filename) =&gt; {
        if (filename) { console.log(filename); }
    });
</code></pre><h3 id="fs-ReadStream-类"><a href="#fs-ReadStream-类" class="headerlink" title="fs.ReadStream 类"></a>fs.ReadStream 类</h3><pre><code>作用：ReadStream 是一个可读流。
属性：
    readStream.bytesRead - 已读取的字节数。
    readStream.path - 流正在读取的文件的路径，指定在 fs.createReadStream() 的第一个参数
方法：open、close分别对应ReadStream文件fs.open()被打开和fs.close()被关闭时触发。
</code></pre><h3 id="fs-Stats-类"><a href="#fs-Stats-类" class="headerlink" title="fs.Stats 类"></a>fs.Stats 类</h3><pre><code>从 fs.stat()、fs.lstat() 和 fs.fstat() 及其同步版本返回的对象都是该类型。
stats.isFile()
stats.isDirectory()
stats.isBlockDevice()
stats.isCharacterDevice()
stats.isSymbolicLink() (仅对 fs.lstat() 有效)
stats.isFIFO()
stats.isSocket()
</code></pre><h3 id="Stat-时间值"><a href="#Stat-时间值" class="headerlink" title="Stat 时间值"></a>Stat 时间值</h3><pre><code>atime &quot;访问时间&quot; - 文件数据最近被访问的时间。
mtime &quot;修改时间&quot; - 文件数据最近被修改的时间。
ctime &quot;变化时间&quot; - 文件状态最近更改的时间。
birthtime &quot;创建时间&quot; - 文件创建的时间。 
</code></pre><h3 id="fs-WriteStream类"><a href="#fs-WriteStream类" class="headerlink" title="fs.WriteStream类"></a>fs.WriteStream类</h3><pre><code>作用：WriteStream 一个可写流。
属性：
    writeStream.bytesWritten - 已写入的字节数。 不包括仍在排队等待写入的数据。
    writeStream.path - 流正在写入的文件的路径，指定在 fs.createWriteStream() 的第一个参数。
方法：
    open() - 当 WriteStream 文件被打开时触发。
    close() - 当 WriteStream 底层的文件描述符已被使用 fs.close() 方法关闭时触发。
</code></pre><h3 id="fs-access-path-mode-callback"><a href="#fs-access-path-mode-callback" class="headerlink" title="fs.access(path[, mode], callback);"></a>fs.access(path[, mode], callback);</h3><pre><code>作用：判断用户是否有权限操作给定的目录或者是文件。
    如果要检查一个文件是否存在且不操作它。
mode参数的可选项：
    fs.constants.F_OK - path 文件对调用进程可见（默认）。
    fs.constants.R_OK - path 文件可被调用进程读取。
    fs.constants.W_OK - path 文件可被调用进程写入。
    fs.constants.X_OK - path 文件可被调用进程执行。
</code></pre><h3 id="fs-accessSync-path-mode"><a href="#fs-accessSync-path-mode" class="headerlink" title="fs.accessSync(path[, mode]);"></a>fs.accessSync(path[, mode]);</h3><pre><code>fs.access() 的同步版本。
</code></pre><h3 id="fs-appendFile-file-data-options-callback"><a href="#fs-appendFile-file-data-options-callback" class="headerlink" title="fs.appendFile(file, data[, options], callback);"></a>fs.appendFile(file, data[, options], callback);</h3><pre><code>作用：异步地追加数据到一个文件，如果文件不存在则创建文件。
fs.appendFile(&apos;filename.txt&apos;, &apos;data to append&apos; , (err) =&gt; {
    if (err) throw err;
    console.log(&apos;添加成功&apos;);
});
</code></pre><h3 id="fs-chmod-path-mode-callback"><a href="#fs-chmod-path-mode-callback" class="headerlink" title="fs.chmod(path, mode, callback);"></a>fs.chmod(path, mode, callback);</h3><pre><code>作用： 更改文件属性（存取模式）(mode)。
</code></pre><h3 id="fs-chown-path-uid-gid-callback"><a href="#fs-chown-path-uid-gid-callback" class="headerlink" title="fs.chown(path, uid, gid, callback);"></a>fs.chown(path, uid, gid, callback);</h3><pre><code>作用：修改文件目录属主。用户ID，群体身份（共享资源系统使用者的身份）
</code></pre><h3 id="fs-close-fd-callback"><a href="#fs-close-fd-callback" class="headerlink" title="fs.close(fd, callback);"></a>fs.close(fd, callback);</h3><pre><code>作用：关闭已打开的文件。
</code></pre><h3 id="fs-createReadStream-path-options"><a href="#fs-createReadStream-path-options" class="headerlink" title="fs.createReadStream(path[, options]);"></a>fs.createReadStream(path[, options]);</h3><pre><code>作用：返回一个新建的ReadStream对象。
</code></pre><h3 id="fs-createWriteStream-path-options"><a href="#fs-createWriteStream-path-options" class="headerlink" title="fs.createWriteStream(path[, options]);"></a>fs.createWriteStream(path[, options]);</h3><pre><code>作用：返回一个新建的WriteStream对象。
</code></pre><h3 id="fs-existsSync-path"><a href="#fs-existsSync-path" class="headerlink" title="fs.existsSync(path);"></a>fs.existsSync(path);</h3><pre><code>作用： 判断文件是否存在的同步版，异步已经废弃了。
</code></pre><h3 id="fs-fchmod-fd-mode-callback"><a href="#fs-fchmod-fd-mode-callback" class="headerlink" title="fs.fchmod(fd, mode, callback);"></a>fs.fchmod(fd, mode, callback);</h3><pre><code>作用：更改文件权限（文件描述符）。
</code></pre><h3 id="fs-fchown-fd-uid-gid-callback"><a href="#fs-fchown-fd-uid-gid-callback" class="headerlink" title="fs.fchown(fd, uid, gid, callback);"></a>fs.fchown(fd, uid, gid, callback);</h3><pre><code>作用：更改文件所有权(文件描述符)。
</code></pre><h3 id="fs-fdatasync-fd-callback"><a href="#fs-fdatasync-fd-callback" class="headerlink" title="fs.fdatasync(fd, callback);"></a>fs.fdatasync(fd, callback);</h3><pre><code>作用：刷新数据到磁盘。
</code></pre><h3 id="fs-fstat-fd-callback"><a href="#fs-fstat-fd-callback" class="headerlink" title="fs.fstat(fd, callback);"></a>fs.fstat(fd, callback);</h3><pre><code>作用：返回文件的详细信息。
</code></pre><h3 id="fs-fsync-fd-callback"><a href="#fs-fsync-fd-callback" class="headerlink" title="fs.fsync(fd, callback);"></a>fs.fsync(fd, callback);</h3><pre><code>作用：同步缓存数据到磁盘。
</code></pre><h3 id="fs-ftruncate-fd-len-callback"><a href="#fs-ftruncate-fd-len-callback" class="headerlink" title="fs.ftruncate(fd, len, callback);"></a>fs.ftruncate(fd, len, callback);</h3><pre><code>作用：截取文件内容。
</code></pre><h3 id="fs-futimes-fd-atime-mtime-callback"><a href="#fs-futimes-fd-atime-mtime-callback" class="headerlink" title="fs.futimes(fd, atime, mtime, callback);"></a>fs.futimes(fd, atime, mtime, callback);</h3><pre><code>作用：更改一个文件所提供的文件描述符引用的文件的时间戳。
</code></pre><h3 id="fs-lchmod-path-mode-callback"><a href="#fs-lchmod-path-mode-callback" class="headerlink" title="fs.lchmod(path, mode, callback);"></a>fs.lchmod(path, mode, callback);</h3><pre><code>作用：更改文件权限(不解析符号链接)。
</code></pre><h3 id="fs-lchown-path-uid-gid-callback"><a href="#fs-lchown-path-uid-gid-callback" class="headerlink" title="fs.lchown(path, uid, gid, callback)"></a>fs.lchown(path, uid, gid, callback)</h3><pre><code>作用：更改文件所有权（不解析符号链接）。
</code></pre><h3 id="fs-link-existingPath-newPath-callback"><a href="#fs-link-existingPath-newPath-callback" class="headerlink" title="fs.link(existingPath, newPath, callback);"></a>fs.link(existingPath, newPath, callback);</h3><pre><code>作用：创建硬链接(只能在本券中)。
</code></pre><h3 id="fs-lstat-path-callback"><a href="#fs-lstat-path-callback" class="headerlink" title="fs.lstat(path, callback);"></a>fs.lstat(path, callback);</h3><pre><code>作用：获取文件信息(不解析符号链接)。
</code></pre><h3 id="fs-mkdir-path-mode-callback"><a href="#fs-mkdir-path-mode-callback" class="headerlink" title="fs.mkdir(path[, mode], callback);"></a>fs.mkdir(path[, mode], callback);</h3><pre><code>作用：创建文件目录，如果目录已存在，将抛出异常。
</code></pre><h3 id="fs-mkdtemp-prefix-options-callback"><a href="#fs-mkdtemp-prefix-options-callback" class="headerlink" title="fs.mkdtemp(prefix[, options], callback);"></a>fs.mkdtemp(prefix[, options], callback);</h3><pre><code>作用：创建临时目录。
</code></pre><h3 id="fs-open-path-flags-mode-callback"><a href="#fs-open-path-flags-mode-callback" class="headerlink" title="fs.open(path, flags[, mode], callback);"></a>fs.open(path, flags[, mode], callback);</h3><pre><code>作用：打开文件。
</code></pre><h3 id="fs-read-fd-buffer-offset-length-position-callback"><a href="#fs-read-fd-buffer-offset-length-position-callback" class="headerlink" title="fs.read(fd, buffer, offset, length, position, callback);"></a>fs.read(fd, buffer, offset, length, position, callback);</h3><pre><code>作用：读取文件内容。
</code></pre><h3 id="fs-readdir-path-options-callback"><a href="#fs-readdir-path-options-callback" class="headerlink" title="fs.readdir(path[, options], callback);"></a>fs.readdir(path[, options], callback);</h3><pre><code>作用：读取文件目录。
</code></pre><h3 id="fs-readFile-path-options-callback"><a href="#fs-readFile-path-options-callback" class="headerlink" title="fs.readFile(path[, options], callback);"></a>fs.readFile(path[, options], callback);</h3><pre><code>作用：读取文件。
</code></pre><h3 id="fs-readlink-path-options-callback"><a href="#fs-readlink-path-options-callback" class="headerlink" title="fs.readlink(path[, options], callback);"></a>fs.readlink(path[, options], callback);</h3><pre><code>作用：读取软连接信息。
</code></pre><h3 id="fs-readSync-fd-buffer-offset-length-position"><a href="#fs-readSync-fd-buffer-offset-length-position" class="headerlink" title="fs.readSync(fd, buffer, offset, length, position);"></a>fs.readSync(fd, buffer, offset, length, position);</h3><pre><code>作用：读取文件内容，返回字节数。
</code></pre><h3 id="fs-realpath-path-options-callback"><a href="#fs-realpath-path-options-callback" class="headerlink" title="fs.realpath(path[, options], callback);"></a>fs.realpath(path[, options], callback);</h3><pre><code>作用：获取真实路径。
</code></pre><h3 id="fs-rename-oldPath-newPath-callback"><a href="#fs-rename-oldPath-newPath-callback" class="headerlink" title="fs.rename(oldPath, newPath, callback);"></a>fs.rename(oldPath, newPath, callback);</h3><pre><code>作用：重命名路径。
</code></pre><h3 id="fs-rmdir-path-callback"><a href="#fs-rmdir-path-callback" class="headerlink" title="fs.rmdir(path, callback);"></a>fs.rmdir(path, callback);</h3><pre><code>作用：删除文件目录。
</code></pre><h3 id="fs-stat-path-callback"><a href="#fs-stat-path-callback" class="headerlink" title="fs.stat(path, callback);"></a>fs.stat(path, callback);</h3><pre><code>作用：获取文件信息。
</code></pre><h3 id="fs-symlink-target-path-type-callback"><a href="#fs-symlink-target-path-type-callback" class="headerlink" title="fs.symlink(target, path[, type], callback);"></a>fs.symlink(target, path[, type], callback);</h3><pre><code>作用：创建符号链接。
</code></pre><h3 id="fs-truncate-path-len-callback"><a href="#fs-truncate-path-len-callback" class="headerlink" title="fs.truncate(path[, len], callback);"></a>fs.truncate(path[, len], callback);</h3><pre><code>作用：文件内容截取操作。
</code></pre><h3 id="fs-unlink-path-callback"><a href="#fs-unlink-path-callback" class="headerlink" title="fs.unlink(path, callback);"></a>fs.unlink(path, callback);</h3><pre><code>作用：删除文件操作。
</code></pre><h3 id="fs-unwatchFile-filename-listener"><a href="#fs-unwatchFile-filename-listener" class="headerlink" title="fs.unwatchFile(filename[, listener]);"></a>fs.unwatchFile(filename[, listener]);</h3><pre><code>作用：解除文件监听。
</code></pre><h3 id="fs-utimes-path-atime-mtime-callback"><a href="#fs-utimes-path-atime-mtime-callback" class="headerlink" title="fs.utimes(path, atime, mtime, callback);"></a>fs.utimes(path, atime, mtime, callback);</h3><pre><code>作用：修改文件时间戳。
</code></pre><h3 id="fs-watch-filename-options-listener"><a href="#fs-watch-filename-options-listener" class="headerlink" title="fs.watch(filename[, options][, listener]);"></a>fs.watch(filename[, options][, listener]);</h3><pre><code>作用：监控文件。
</code></pre><h3 id="fs-watchFile-filename-options-listener"><a href="#fs-watchFile-filename-options-listener" class="headerlink" title="fs.watchFile(filename[, options], listener);"></a>fs.watchFile(filename[, options], listener);</h3><pre><code>作用：监控文件。
</code></pre><h3 id="fs-write-fd-buffer-offset-length-position-callback"><a href="#fs-write-fd-buffer-offset-length-position-callback" class="headerlink" title="fs.write(fd, buffer[, offset[, length[, position]]], callback);"></a>fs.write(fd, buffer[, offset[, length[, position]]], callback);</h3><pre><code>作用：向文件写数据。
</code></pre><h3 id="fs-writeFile-file-data-options-callback"><a href="#fs-writeFile-file-data-options-callback" class="headerlink" title="fs.writeFile(file, data[, options], callback);"></a>fs.writeFile(file, data[, options], callback);</h3><pre><code>作用：向文件写数据。        
</code></pre><blockquote>
<p>   参考文档：<br>    <a href="http://nodejs.cn/api/fs.html" target="_blank" rel="external">fs参考-api</a><br>    <a href="http://blog.csdn.net/zza000000/article/details/54341943" target="_blank" rel="external">fs模块</a></p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://fanerge.github.io/2017/09/16/nodejs自带模块学习-util/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="余真帆-fanerge">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="余真帆的博客">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/09/16/nodejs自带模块学习-util/" itemprop="url">
                  util模块-工具
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-16T10:18:15+08:00">
                2017-09-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NodeJS/" itemprop="url" rel="index">
                    <span itemprop="name">NodeJS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/09/16/nodejs自带模块学习-util/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/09/16/nodejs自带模块学习-util/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="util模块"><a href="#util模块" class="headerlink" title="util模块"></a>util模块</h3><pre><code>说明：util 模块主要用于支持 Node.js 内部 API 的需求。 大部分实用工具也可用于应用程序与模块开发者。
</code></pre><h3 id="util-callbackify-original"><a href="#util-callbackify-original" class="headerlink" title="util.callbackify(original)"></a>util.callbackify(original)</h3><h3 id="util-debuglog-section"><a href="#util-debuglog-section" class="headerlink" title="util.debuglog(section)"></a>util.debuglog(section)</h3><pre><code>作用：util.debuglog() 方法用于创建一个函数，基于 NODE_DEBUG 环境变量的存在与否有条件地写入调试信息到 stderr。
    const debuglog = util.debuglog(&apos;foo&apos;);
    debuglog(&apos;hello from foo [%d]&apos;, 123);
    若程序的环境运行是带上NODE_DEBUG=foo,则FOO 3245: hello from foo [123]
    3234是进程id
</code></pre><h3 id="util-deprecate-function-string"><a href="#util-deprecate-function-string" class="headerlink" title="util.deprecate(function, string)"></a>util.deprecate(function, string)</h3><pre><code>作用：util.deprecate() 方法会包装给定的 function 或类，并标记为废弃的。
    // 在util模块中
    exports.puts = util.deprecate(function() {
      for (let i = 0, len = arguments.length; i &lt; len; ++i) {
        process.stdout.write(arguments[i] + &apos;\n&apos;);
      }
    }, &apos;util.puts: 使用 console.log 代替&apos;);
</code></pre><h3 id="util-format-format-…args"><a href="#util-format-format-…args" class="headerlink" title="util.format(format[, …args])"></a>util.format(format[, …args])</h3><pre><code>作用：返回一个格式化后的字符串，使用第一个参数作为一个类似 printf 的格式。
对应的占位符：
    %s - 字符串
    %d - 数值
    %i - Integer
    %f - Float
    %j - JSON
    %o - Object
    %% - 单个百分号（&apos;%&apos;）。不消耗参数。
    util.format(&apos;%s:%d&apos;, &apos;fan&apos;, 100); // &apos;fan:100&apos;
</code></pre><h3 id="util-inherits-constructor-superConstructor"><a href="#util-inherits-constructor-superConstructor" class="headerlink" title="util.inherits(constructor, superConstructor)"></a>util.inherits(constructor, superConstructor)</h3><pre><code>注意，不建议使用 util.inherits()。 请使用 ES6 的 class 和 extends 关键词获得语言层面的继承支持。
作用：从一个构造函数中继承原型方法到另一个。 constructor 的原型会被设置到一个从 superConstructor 创建的新对象上。
    util.inherits(MyStream, EventEmitter);
</code></pre><h3 id="util-inspect-object-options"><a href="#util-inspect-object-options" class="headerlink" title="util.inspect(object[, options])"></a>util.inspect(object[, options])</h3><pre><code>作用：返回 object 的字符串表示，主要用于调试。 附加的 options 可用于改变格式化字符串的某些方面。
</code></pre><h3 id="自定义-util-inspect-颜色"><a href="#自定义-util-inspect-颜色" class="headerlink" title="自定义 util.inspect 颜色"></a>自定义 util.inspect 颜色</h3><pre><code>作用：可以通过 util.inspect.styles 和 util.inspect.colors 属性全局地自定义 util.inspect 的颜色输出（如果已启用）。
</code></pre><h3 id="util-inspect-custom"><a href="#util-inspect-custom" class="headerlink" title="util.inspect.custom"></a>util.inspect.custom</h3><pre><code>作用：可被用于声明自定义的查看函数。
</code></pre><h3 id="util-inspect-defaultOptions"><a href="#util-inspect-defaultOptions" class="headerlink" title="util.inspect.defaultOptions"></a>util.inspect.defaultOptions</h3><pre><code>作用：defaultOptions 值允许对被 util.inspect 使用的默认选项进行自定义。
</code></pre><h3 id="util-promisify-original"><a href="#util-promisify-original" class="headerlink" title="util.promisify(original)"></a>util.promisify(original)</h3><pre><code>作用：让一个遵循通常的让一个遵循通常的 Node.js 回调风格的函数， 即 (err, value) =&gt; ... 回调函数是最后一个参数, 返回一个返回值是一个 promise 版本的函数。    
</code></pre><blockquote>
<p>   参考文档：<br>    <a href="http://nodejs.cn/api/util.html" target="_blank" rel="external">util参考-api</a></p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://fanerge.github.io/2017/09/16/nodejs自带模块学习-path/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="余真帆-fanerge">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="余真帆的博客">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/09/16/nodejs自带模块学习-path/" itemprop="url">
                  path模块-路径
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-16T10:16:31+08:00">
                2017-09-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NodeJS/" itemprop="url" rel="index">
                    <span itemprop="name">NodeJS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/09/16/nodejs自带模块学习-path/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/09/16/nodejs自带模块学习-path/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="path模块-路径"><a href="#path模块-路径" class="headerlink" title="path模块-路径"></a>path模块-路径</h3><pre><code>在不同系统中，路径分隔符显示不同。POSIX 上的 / 与 Windows 上的 \
说明：path 模块提供了一些工具函数，用于处理文件与目录的路径。
</code></pre><h3 id="path-sep"><a href="#path-sep" class="headerlink" title="path.sep"></a>path.sep</h3><pre><code>作用：提供了平台特定的路径片段分隔符。
    windows上是 \
    POSIX上是 /
</code></pre><h3 id="path-win32-和-path-posix"><a href="#path-win32-和-path-posix" class="headerlink" title="path.win32 和 path.posix"></a>path.win32 和 path.posix</h3><pre><code>要想在任何操作系统上处理 Windows 文件路径时获得一致的结果，可以使用 path.win32
    path.win32.basename(&apos;c:\\temp\\myfile.html&apos;); // myfile.html
要想在任何操作系统上处理 POSIX 文件路径时获得一致的结果，可以使用 path.posix
    path.posix.basename(&apos;/temp/myfile.html&apos;); // myfile.html
</code></pre><h3 id="path-delimiter"><a href="#path-delimiter" class="headerlink" title="path.delimiter"></a>path.delimiter</h3><pre><code>作用：提供平台特定的路径分隔符。
    windows是;
    POSIX是:
    process.env.PATH; // &apos;/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin&apos;
    process.env.PATH.split(path.delimiter); // [&apos;/usr/bin&apos;, &apos;/bin&apos;, &apos;/usr/sbin&apos;, &apos;/sbin&apos;, &apos;/usr/local/bin&apos;]
</code></pre><h3 id="path-basename-path-ext"><a href="#path-basename-path-ext" class="headerlink" title="path.basename(path[, ext]);"></a>path.basename(path[, ext]);</h3><pre><code>作用：返回一个 path 的最后一部分。
    path.basename(&apos;/foo/bar/myfile.html&apos;); // &apos;myfile.html&apos;
    patn.basename(&apos;/foo/bar/myfile.html&apos;, &apos;.html&apos;); // &apos;myfile&apos;
</code></pre><h3 id="path-dirname-path"><a href="#path-dirname-path" class="headerlink" title="path.dirname(path);"></a>path.dirname(path);</h3><pre><code>作用：返回一个path的目录名。
    path.dirname(&apos;/foo/bar/myfile&apos;); // foo/bar
</code></pre><h3 id="path-extname-path"><a href="#path-extname-path" class="headerlink" title="path.extname(path)"></a>path.extname(path)</h3><pre><code>作用：返回 path 的扩展名，即从 path 的最后一部分中的最后一个 .（句号）字符到字符串结束。
    path.extname(&apos;index.coffee.md&apos;); // &apos;.md&apos;
</code></pre><h3 id="path-format-pathObject"><a href="#path-format-pathObject" class="headerlink" title="path.format(pathObject);"></a>path.format(pathObject);</h3><pre><code>作用：会从一个对象返回一个路径字符串。 与 path.parse() 相反。
参数：Object
    {
        dir: &apos;&apos;,
        root: &apos;&apos;,
        base: &apos;&apos;,
        name: &apos;&apos;,
        ext: &apos;&apos;
    }
    在windows中
    path.format({
        root: &apos;ignored&apos;,
        dir: &apos;\home\user&apos;,
        base: &apos;file.txt&apos;
    });
    // &apos;\home\user\file.txt&apos;
</code></pre><h3 id="path-parse-path"><a href="#path-parse-path" class="headerlink" title="path.parse(path);"></a>path.parse(path);</h3><pre><code>作用：返回一个对象，对象的属性表示 path 的元素。
    path.parse(&apos;/home/user/file.txt&apos;);
    // {
        root: &apos;/&apos;,
        base: &apos;/home/user&apos;,
        ext: &apos;.txt&apos;.
        name: &apos;file&apos;
    }
</code></pre><h3 id="path-isAbsolute-path"><a href="#path-isAbsolute-path" class="headerlink" title="path.isAbsolute(path);"></a>path.isAbsolute(path);</h3><pre><code>作用：会判定 path 是否为一个绝对路径。
    path.isAbsolute(&apos;bar\baz&apos;); // true
</code></pre><h3 id="path-join-…path"><a href="#path-join-…path" class="headerlink" title="path.join([…path]);"></a>path.join([…path]);</h3><pre><code>作用：使用平台特定的分隔符把全部给定的 path 片段连接到一起，并规范化生成的路径。
    path.join(&apos;/foo&apos;, &apos;bar&apos;, &apos;baz/asdf&apos;, &apos;quux&apos;, &apos;..&apos;); // 返回: &apos;/foo/bar/baz/asdf&apos;
</code></pre><h3 id="path-normalize-path"><a href="#path-normalize-path" class="headerlink" title="path.normalize(path);"></a>path.normalize(path);</h3><pre><code>作用：规范化给定的 path，并解析 &apos;..&apos; 和 &apos;.&apos; 片段。
    path.normalize(&apos;/foo/bar/baz/asdf/quux/..&apos;); // &apos;/foo/bar/baz/asdf&apos;
</code></pre><h3 id="path-relative-from-to"><a href="#path-relative-from-to" class="headerlink" title="path.relative(from, to);"></a>path.relative(from, to);</h3><pre><code>作用：返回从 from 到 to 的相对路径（基于当前工作目录）。
    path.relative(&apos;/data/orandea/test/aaa&apos;, &apos;/data/orandea/impl/bbb&apos;);
    // &apos;../../impl/bbb&apos;
</code></pre><h3 id="path-resolve-…paths"><a href="#path-resolve-…paths" class="headerlink" title="path.resolve([…paths]);"></a>path.resolve([…paths]);</h3><pre><code>作用：把一个路径或路径片段的序列解析为一个绝对路径。
    path.resolve(&apos;/foo/bar&apos;, &apos;./baz&apos;); // &apos;/foo/bar/baz&apos;
</code></pre><blockquote>
<p>   参考文档：<br>    <a href="http://nodejs.cn/api/path.html" target="_blank" rel="external">path参考-api</a></p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://fanerge.github.io/2017/09/14/sql参考手册/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="余真帆-fanerge">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="余真帆的博客">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/09/14/sql参考手册/" itemprop="url">
                  sql参考手册
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-14T22:21:26+08:00">
                2017-09-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/sql/" itemprop="url" rel="index">
                    <span itemprop="name">sql</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/09/14/sql参考手册/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2017/09/14/sql参考手册/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="AND-OR"><a href="#AND-OR" class="headerlink" title="AND / OR"></a>AND / OR</h4><pre><code>AND &amp; OR 运算符用于基于一个以上的条件对记录进行过滤。
语法：SELECT column_name(s) FROM table_name WHERE condition AND|OR condition;
选择count大于10 且 count小于230
    SELECT * FROM access_log WHERE count &gt; 10 AND count &lt; 230
选择count小于10 或 count大于230    
    SELECT * FROM access_log WHERE count &lt; 10 OR count &gt; 230
</code></pre><h4 id="ALTER-TABLE"><a href="#ALTER-TABLE" class="headerlink" title="ALTER TABLE"></a>ALTER TABLE</h4><pre><code>ALTER TABLE 语句用于在已有的表中添加、删除或修改列。
语法：
    // 添加一列
    ALTER TABLE table_name  
    ADD column_name datatype 
    // 删除一列
    ALTER TABLE table_name   
    DROP COLUMN column_name
    // 更改一列字段类型    
    ALTER TABLE table_name   
    MODIFY COLUMN column_name VARCHAR(10)
    // 更改一列
    ALTER TABLE table_name   
    CHANGE COLUMN column_name re_name
</code></pre><h4 id="AS-alias"><a href="#AS-alias" class="headerlink" title="AS (alias)"></a>AS (alias)</h4><pre><code>SELECT column_name AS column_alias 
FROM table_name
OR
SELECT column_name
FROM table_name AS table_alias
对url改名为ii    
    SELECT url AS ii FROM websites
</code></pre><h4 id="BETWEEN"><a href="#BETWEEN" class="headerlink" title="BETWEEN"></a>BETWEEN</h4><pre><code>语法：
    SELECT column_name(s)
    FROM table_name
    WHERE column_name
    BETWEEN value1 AND value2
选择alexa1到10的所有记录
    SELECT * FROM websites WHERE alexa BETWEEN 1 AND 10    
</code></pre><h4 id="CREATE-DATABASE"><a href="#CREATE-DATABASE" class="headerlink" title="CREATE DATABASE"></a>CREATE DATABASE</h4><pre><code>语法：CREATE DATABASE database_name
创建IIII数据库    
    CREATE DATABASE IIII    
</code></pre><h4 id="DROP-DATABASE"><a href="#DROP-DATABASE" class="headerlink" title="DROP DATABASE"></a>DROP DATABASE</h4><pre><code>语法：DROP DATABASE database_name
删除IIII数据库
    DROP DATABASE IIII
</code></pre><h4 id="CREATE-TABLE"><a href="#CREATE-TABLE" class="headerlink" title="CREATE TABLE"></a>CREATE TABLE</h4><pre><code>语法：
    CREATE TABLE table_name (
        column_name data_type,
        column_name data_type,
        ...
    )
创建一个名为 sds 的表，且有字段int    
    CREATE TABLE sds (id int)
</code></pre><h4 id="DROP-TABLE"><a href="#DROP-TABLE" class="headerlink" title="DROP TABLE"></a>DROP TABLE</h4><pre><code>语法：DROP TABLE IF EXISTS tabale_name
如果表sds存在就删除
    DROP TABLE IF EXISTS sds
</code></pre><h4 id="CREATE-INDEX"><a href="#CREATE-INDEX" class="headerlink" title="CREATE INDEX"></a>CREATE INDEX</h4><pre><code>创建索引
语法：
    CREATE INDEX index_name
    ON tabale_name (column_name)
    OR
    CREATE UNIQUE INDEX index_name
    ON tabale_name (column_name)
</code></pre><h4 id="CREATE-VIEW"><a href="#CREATE-VIEW" class="headerlink" title="CREATE VIEW"></a>CREATE VIEW</h4><pre><code>创建视图
视图是基于 SQL 语句的结果集的可视化的表。
语法：
    CREATE VIEW view_name AS
    SELECT column_name(s)
    FROM tabale_name
</code></pre><h4 id="DELETE"><a href="#DELETE" class="headerlink" title="DELETE"></a>DELETE</h4><pre><code>DELETE FROM tabale_name
WHERE some_column = some_value
OR
DELETE FROM tabale_name // 删除整个表
DELETE * FROM tabale_name
</code></pre><h4 id="DROP-DATABASE-1"><a href="#DROP-DATABASE-1" class="headerlink" title="DROP DATABASE"></a>DROP DATABASE</h4><pre><code>删除数据库
DROP DATABASE data_name
</code></pre><h4 id="DROP-INDEX"><a href="#DROP-INDEX" class="headerlink" title="DROP INDEX"></a>DROP INDEX</h4><pre><code>删除索引
DROP INDEX index_name
</code></pre><h4 id="DROP-TABLE-1"><a href="#DROP-TABLE-1" class="headerlink" title="DROP TABLE"></a>DROP TABLE</h4><pre><code>删除表
DROP TABLE table_name
</code></pre><h4 id="GROUP-BY"><a href="#GROUP-BY" class="headerlink" title="GROUP BY"></a>GROUP BY</h4><pre><code>合计函数 (比如 SUM) 常常需要添加 GROUP BY 语句。
SELECT column_name, aggregate_function(column_name)
FROM table_name
WHERE column_name operator value1
GROUP BY column_name
</code></pre><h4 id="HAVING"><a href="#HAVING" class="headerlink" title="HAVING"></a>HAVING</h4><pre><code>在 SQL 中增加 HAVING 子句原因是，WHERE 关键字无法与合计函数一起使用。    
SELECT column_name, aggregate_function(column_name)
FROM tabale_name
WHERE column_name operator value
GROUP BY column_name
HAVING aggregate_function(column_name) operator value
</code></pre><h4 id="IN"><a href="#IN" class="headerlink" title="IN"></a>IN</h4><pre><code>IN 操作符允许您在 WHERE 子句中规定多个值。
SELECT column_name(s)
FROM tabale_name
WHERE column_name
IN(value1, value2)
</code></pre><h4 id="INSERT-INTO"><a href="#INSERT-INTO" class="headerlink" title="INSERT INTO"></a>INSERT INTO</h4><pre><code>插入数据
INSERT INTO tabale_name
VALUES(value1, value2, ...value3)
OR    
INSERT INTO tabale_name
(column1, column2, ...column3)
VALUES(value1, value2, ...value3)
</code></pre><h4 id="INNER-JOIN"><a href="#INNER-JOIN" class="headerlink" title="INNER JOIN"></a>INNER JOIN</h4><pre><code>在表中存在至少一个匹配时，INNER JOIN 关键字返回行。    
SELECT column_name(s)
FROM tabale_name1
INNER JOIN tabale_name2
ON tabale_name1.column_name = tabale_name2.column_name
</code></pre><h4 id="LEFT-JOIN"><a href="#LEFT-JOIN" class="headerlink" title="LEFT JOIN"></a>LEFT JOIN</h4><pre><code>返回左表
SELECT column_name(s)
FROM tabale_name1
LEFT JOIN tabale_name2
ON tabale_name1.column_name = tabale_name2.column_name
</code></pre><h4 id="RIGHT-JOIN"><a href="#RIGHT-JOIN" class="headerlink" title="RIGHT JOIN"></a>RIGHT JOIN</h4><pre><code>返回左表
SELECT column_name(s)
FROM tabale_name1
RIGHT JOIN tabale_name2
ON tabale_name1.column_name = tabale_name2.column_name        
</code></pre><h4 id="FULL-JOIN"><a href="#FULL-JOIN" class="headerlink" title="FULL JOIN"></a>FULL JOIN</h4><pre><code>只要其中某个表存在匹配，FULL JOIN 关键字就会返回行。    
SELECT column_name(s)
FROM tabale_name1
FULL JOIN tabale_name2
ON tabale_name1.column_name = tabale_name2.column_name
</code></pre><h4 id="LIKE"><a href="#LIKE" class="headerlink" title="LIKE"></a>LIKE</h4><pre><code>LIKE 操作符用于在 WHERE 子句中搜索列中的指定模式。    
SELECT column_name(s)
FROM tabale_name
WHERE column_name LIKE pattern
</code></pre><h4 id="ORDER-BY"><a href="#ORDER-BY" class="headerlink" title="ORDER BY"></a>ORDER BY</h4><pre><code>ORDER BY 语句用于对结果集进行排序。
SELECT column_name 
FROM table_name
ORDER BY column_name[ASC|DESC]
</code></pre><h4 id="SELECT"><a href="#SELECT" class="headerlink" title="SELECT"></a>SELECT</h4><pre><code>查询
SELECT column_name(s)
FROM tabale_name
</code></pre><h4 id="SELECT-1"><a href="#SELECT-1" class="headerlink" title="SELECT *"></a>SELECT *</h4><pre><code>SELECT *
FROM tabale_name
</code></pre><h4 id="SELECT-DISTINCT"><a href="#SELECT-DISTINCT" class="headerlink" title="SELECT DISTINCT"></a>SELECT DISTINCT</h4><pre><code>关键词 DISTINCT 用于返回唯一不同的值。    
SELECT DISTINCT column_name(s)
FROM tabale_name
</code></pre><h4 id="SELECT-INTO"><a href="#SELECT-INTO" class="headerlink" title="SELECT INTO"></a>SELECT INTO</h4><pre><code>SELECT *
INTO new_table_name [IN externaldatabase]
FROM old_table_name
OR
SELECT column_name(s)
INTO new_table_name [IN externaldatabase]
FROM old_table_name
</code></pre><h4 id="SELECT-TOP"><a href="#SELECT-TOP" class="headerlink" title="SELECT TOP"></a>SELECT TOP</h4><pre><code>SELECT column_name(s)
FROM table_name
LIMIT number
</code></pre><h4 id="TRUNCATE-TABLE"><a href="#TRUNCATE-TABLE" class="headerlink" title="TRUNCATE TABLE"></a>TRUNCATE TABLE</h4><pre><code>TRUNCATE TABLE table_name    
</code></pre><h4 id="UNION"><a href="#UNION" class="headerlink" title="UNION"></a>UNION</h4><pre><code>SQL UNION 操作符合并两个或多个 SELECT 语句的结果。
SELECT column_name(s) FROM tabale_name1
UNION
SELECT column_name(s) FROM tabale_name2
</code></pre><h4 id="UNION-ALL"><a href="#UNION-ALL" class="headerlink" title="UNION ALL"></a>UNION ALL</h4><pre><code>SELECT column_name(s) FROM tabale_name1
UNION ALL
SELECT column_name(s) FROM tabale_name2
</code></pre><h4 id="UPDATE"><a href="#UPDATE" class="headerlink" title="UPDATE"></a>UPDATE</h4><pre><code>更新
UPDATE tabale_name
SET column1=value, column2=value
WHERE some_column=some_value
</code></pre><h4 id="WHERE"><a href="#WHERE" class="headerlink" title="WHERE"></a>WHERE</h4><pre><code>条件
SELECT column_name(s)
FROM tabale_name
WHERE column_name operator value
</code></pre><blockquote>
<p>   参考文档<br>    <a href="http://www.runoob.com/sql/sql-quickref.html" target="_blank" rel="external">SQL文档</a></p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar.jpg"
               alt="余真帆-fanerge" />
          <p class="site-author-name" itemprop="name">余真帆-fanerge</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
           
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">64</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">22</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">余真帆-fanerge</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  






  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  


  

    
      <script id="dsq-count-scr" src="https://fanerge.disqus.com/count.js" async></script>
    

    

  




	





  





  





  






  





  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  

  

</body>
</html>
